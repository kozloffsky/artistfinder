{% include 'ActedLegalDocsBundle:Default:header.html.twig' %}


<main class="chat-room">

    <div class="container">
        {% include 'ActedLegalDocsBundle:ChatRoom:dashboardmenu.html.twig' %}
        <!-- THIS MENU VISIBLE ONLY ON DESCTIOP SCREEN-->
        <!--<ul class="categories-menu">
            <li class="menu-block active"><a href="/messages">Messages</a></li>
            <li class="menu-block"><a href="/enquiries">Enquiries</a></li>
            <li class="menu-block"><a href="/bookings">Bookings</a></li>
            <li class="menu-block"><a href="/agenda">Agenda</a></li>
            <li class="menu-block"><a href="/payment">Payments</a></li>
            <li class="menu-block"><a href="/prices">Prices</a></li>
            <li class="menu-block"><a href="/reports">Technical Requirements</a></li>
            <li class="menu-block"><a href="/feedbacks">Feedbacks</a></li>
        </ul>-->

        <!-- THIS DROPDOWN VISIBLE ONLY ON SM SCREEN-->
        <!--<div class="dropdown categories-dropdown hidden-lg hidden-md hidden-sm visible-xs">
            <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">Chat-room
                <span class="caret"></span></button>
            <ul class="dropdown-menu">
                <li class="menu-block"><a href="/messages">Messages</a></li>
                <li class="menu-block"><a href="/enquiries">Enquiries</a></li>
                <li class="menu-block"><a href="/bookings">Bookings</a></li>
                <li class="menu-block"><a href="/agenda">Agenda</a></li>
                <li class="menu-block"><a href="/prices">Prices</a></li>
                <li class="menu-block"><a href="/payment">Payment & Accounts</a></li>
                <li class="menu-block"><a href="/reports">Reports</a></li>
                <li class="menu-block"><a href="/feedbacks">Feedbacks</a></li>
            </ul>
        </div>-->

        <div class="wrap">
            <!-- TITLE SECTION -->
            <section>
                <!--<a class="btn-back" href="/messages">Back to messages</a>-->
                <h2 class="main-title">Chatroom #{{ chat.chat_id }}</h2>
                <div class="hidden" id="chatId">{{ chat.chat_id }}</div>
                <!--detail form start-->
                <div class="tooltip-message warning">
                    <i class="notification-bell" aria-hidden="true"></i>
                    <span>The client has updated the event details, please validate them!</span>
                </div>
                <div class="tooltip-message info">
                    <i class="notification-bell" aria-hidden="true"></i>
                    <span>The client has updated the performance time, please confirm you are fine with this change</span>
                </div>
            </section>

            <!-- EVENT INFO SECTION -->
            <section class="section-one">
                <div class="section-info-title">
                    <span></span>
                    <p>Make an offer</p>
                </div>

                {% include "ActedLegalDocsBundle:ChatRoom:chatRoomEvent.html.twig" %}

                <div class="section-info-footer">
                    <div class="row">
                        <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6 no-pad">
                            <div class="custom-checkbox">
                                <input id="details_agree" name="package-check" value="" type="checkbox">
                                <label for="details_agree">I agree with these details</label>
                            </div>
                        </div>
                        <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6 no-pad">
                            <div class="custom-checkbox">
                                <input id="extra_provide_acts" name="package-check" value="" type="checkbox">
                                <label for="extra_provide_acts">I can provide the acts & extras selected</label>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section class="section-two">
                <div class="section-info-title">
                    <span></span>
                    <p>Agree on the timing and technical requirements</p>
                </div>
                <div class="row clearfix">
                    <div class="tr-container">
                        <div class="col-md-6 no-pad">
                            <span class="title">Performance time</span>
                            <div class="performance-time">
                                <span class="info">The performance starts at:</span>
                                <span class="time">6:30 PM</span>
                            </div>
                            <div class="performance-info">
                                Additional info <i>(This will be included in the booking agreement):</i>
                            </div>
                            <div class="performance-info-desc">
                                <p>This performance will continue for 3 days. First two days will start from 2 pm till 3 am. And third day will be a full day party!</p>
                            </div>
                        </div>
                        <div class="col-md-6">
                            {% include 'ActedLegalDocsBundle:ChatRoom:chat_tech_req.html.twig' %}
                        </div>
                    </div>
                </div>
                <div class="section-info-footer">
                    <div class="row">
                        <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6 no-pad">
                            <div class="custom-checkbox">
                                <input id="timing_agree" name="timing_agree" value="" type="checkbox">
                                <label for="timing_agree">I agree with this timing</label>
                            </div>
                        </div>
                        <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6 no-pad">
                            <div class="custom-checkbox">
                                <input id="requirements_agree" name="requirements_agree" value="" type="checkbox">
                                <label for="requirements_agree">I agree to provide these requirements</label>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <section class="section-three">
                <div class="section-info-title">
                    <span></span>
                    <p>Confirm the booking</p>
                </div>
                <div class="row booking-confirm-container">
                    <div class="col-md-6">
                        <p class="deposit-info"><b>Deposit:</b> 1500 GBP received via secured payment</p>
                        <p class="deposit-info"><b>Balance:</b> 1500 GBP unpaid</p>
                    </div>
                    <div class="col-md-3 booking-confirm-list pull-right">
                        <div class="booking-confirm-item">
                            <div>
                                Quotation
                            </div>
                            <div>
                                <a href="#">See</a>
                            </div>
                            <div>
                                <a href="#">Download</a>
                            </div>
                        </div>
                        <div class="booking-confirm-item">
                            <div>
                                Invoice
                            </div>
                            <div>
                                <a href="#">See</a>
                            </div>
                            <div>
                                <a href="#">Download</a>
                            </div>
                        </div>
                        <div class="booking-confirm-item">
                            <div>
                                Booking Agreement
                            </div>
                            <div>
                                <a href="#">See</a>
                            </div>
                            <div>
                                <a href="#">Download</a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row text-center">
                    <button class="book-now-btn" disabled>Book now</button>
                </div>
            </section>
            <section class="section-four">
                <div class="section-info-title">
                    <span></span>
                    <p>Contact details ${message}</p>
                </div>
                <div class="row list contacts-info clearfix">
                    <div class="col-lg-3 col-md-3 col-sm-3 no-pad">
                        <label for="c-name">Name</label>
                        <input type="text" id="c-name" placeholder="Thomas Man" value="Thomas Man">
                    </div>
                    <div class="col-lg-3 col-md-3 col-sm-3 no-pad">
                        <label for="c-person">Contact person</label>
                        <input type="text" id="c-person" placeholder="***************" value="***************">
                    </div>
                    <div class="col-lg-3 col-md-3 col-sm-3 no-pad">
                        <label for="p-number">Phone Number</label>
                        <input type="text" id="p-number" placeholder="***************" value="***************">
                    </div>
                    <div class="col-lg-3 col-md-3 col-sm-3 no-pad">
                        <label for="e-address">Email address</label>
                        <input type="text" id="e-address" placeholder="***************" value="***************">
                    </div>
                </div>
            </section>

            <!--detail form end-->
            <!--miscellaneous list start-->

            <!--miscellaneous list end-->
        </div>
        <!--twocolumns start-->
        <div id="twocolumns">
            <div class="col-1">
                <ul class="comments-list">
                    <script>
                        //TODO: mode outside Vue template
                        window.chatMessages = []
                        window.artistId = "{{ chatRoom.artist.artist.id }}"
                    </script>
                    {% for chatMessage in chat.message |reverse %}
                        <script>
                            window.chatMessages.push({
                                msg:"{{ chatMessage.message_text }}",
                                send_date:"{{ chatMessage.time_from_get }}",
                                file: [
                                    {% for file in chatMessage.files %}
                                    { path:"{{ file.file_name }}"},
                                    {% endfor %}
                                ]
                            })
                        </script>
                        <!--<li>
                            <a href="#" class="img-holder">
                                <img src="assets/images/{{ asset('assets/images/noAvatar.png') }}" alt="image description"/>
                            </a>
                            <div class="holder">
                                {% if chatMessage.message_text is defined %}
                                <div class="box">
                                    <p>{{ chatMessage.message_text }}</p>
                                    <em class="date">{{ chatMessage.time_from_get }}</em>
                                </div>
                                {% endif %}
                            </div>
                        </li>-->
                    {% endfor %}

                    <li v-for="message in chatMessages">
                        <a href="#" class="img-holder">
                            <img src="assets/images/avatar.jpg" alt="image description">
                        </a>
                        <div class="holder">
                            <div class="box">
                                <p>
                                    <a :href="file.path" v-for="file in message.file">
                                        <img :src="file.path" class="chatImage" />
                                    </a>
                                </p>
                                <p>${message.msg}</p>
                                <em class="date">${message.send_date}</em>
                            </div>
                        </div>
                    </li>
                </ul>
            </div>
            <div class="col-2">
                <form class="message-form" action="#">
                    <textarea class="textarea" maxlength="512" placeholder="Write your message" id="chat-room">${sendText}</textarea>
                    <div class="upload-box">
                        <div class="row">
                            <input type="file" name="files[]" id="filer_input1" class="chatFileUpload" multiple="multiple">
                        </div>
                        <div class="controls">
                            <div class="button-gradient filled">
                                <button class="btn" id="sendMsg" type="submit"><span class="glyphicon glyphicon-refresh glyphicon-refresh-animate chatMessageSending"></span> Send</button>
                            </div>
                        </div>
                    </div>
                </form>
                <div class="document-list">
                    {% for file in files %}
                            <div class="doc-item">
                                <i class="icon icon-white-cross"></i>
                                <img src="{{ file.fileName }}">
                            </div>

                    {% endfor %}

                </div>
                <div class="document-files">

                    <div class="file-item">
                        <span>Document</span>
                        <i class="icon icon-delete-attached" aria-hidden="true"></i>
                        <span>Event_1.pdf</span>
                    </div>
                    <div class="file-item">
                        <span>Document</span>
                        <i class="icon icon-delete-attached" aria-hidden="true"></i>
                        <span>Event_1.pdf</span>
                    </div>
                    <div class="file-item">
                        <span>Document</span>
                        <i class="icon icon-delete-attached" aria-hidden="true"></i>
                        <span>Event_1.pdf</span>
                    </div>
                    <div class="file-item">
                        <span>Document</span>
                        <i class="icon icon-delete-attached" aria-hidden="true"></i>
                        <span>Event_1.pdf</span>
                    </div>
                    <div class="file-item">
                        <span>Document</span>
                        <i class="icon icon-delete-attached" aria-hidden="true"></i>
                        <span>Event_1.pdf</span>
                    </div>
                </div>
            </div>
        </div>
        <!--twocolumns end-->
    </div>

</main>











{#<main class="chat-room">#}

    {#<div class="container">#}
        {#{% include 'ActedLegalDocsBundle:ChatRoom:dashboardmenu.html.twig' %}#}

        {#<div class="wrap">#}
            {#<a class="btn-back" href="{{ path('all_messages_user') }}">Back to messages</a>#}
            {#<h2 class="main-title">Chatroom #{{ chat.chat_id }}</h2>#}
            {#<div class="hidden" id="chatId">{{ chat.chat_id }}</div>#}
            {#<!--detail form start-->#}
            {#{% include 'ActedLegalDocsBundle:ChatRoom:chatRoomEvent.html.twig' %}#}
            {#<!--detail form end-->#}
            {#<!--miscellaneous list start-->#}
            {#<ul class="miscellaneous-list">#}
                {#<li>#}
                    {#<a href="#"><i class="fa fa-share-alt" aria-hidden="true"></i>Share</a>#}
                {#</li>#}
                {#<li>#}
                    {#<a href="#"><i class="fa fa-print" aria-hidden="true"></i>Print</a>#}
                {#</li>#}
            {#</ul>#}
            {#<!--miscellaneous list end-->#}
        {#</div>#}
        {#<article class="info-block border-b clearfix">#}
            {#<div class="col-lg-7 col-md-7 col-sm-7 no-padding">#}
                {#<ul class="block-list">#}
                    {#<li>#}
                        {#<dl>#}
                            {#<dt><strong class="bold">Status:</strong></dt>#}
                            {#<dd>#}
                                {#<span class="confirm">Confirmed</span>#}
                            {#</dd>#}
                        {#</dl>#}
                    {#</li>#}
                    {#<li>#}
                        {#<dl>#}
                            {#<dt><strong class="bold">Payment:</strong></dt>#}
                            {#<dd></dd>#}
                        {#</dl>#}
                    {#</li>#}
                    {#<li>#}
                        {#<dl>#}
                            {#<dt>Deposit:</dt>#}
                            {#<dd>1,500 GBP received vie secured payment</dd>#}
                        {#</dl>#}
                    {#</li>#}
                    {#<li>#}
                        {#<dl>#}
                            {#<dt>Balance:</dt>#}
                            {#<dd>1,500 GBP unpaid</dd>#}
                        {#</dl>#}
                    {#</li>#}
                {#</ul>#}
            {#</div>#}
            {#<div class="col-lg-5 col-md-5 col-sm-5 no-padding">#}
                {#<ul class="block-list alt">#}
                    {#<li>#}
                        {#<dl>#}
                            {#<dt>Quotation</dt>#}
                            {#<dd>#}
                                {#<a  target="_blank" href="{{ quotationLink }}">See</a>#}
                                {#<a href="{{ quotationLink }}" download>Download</a>#}
                            {#</dd>#}
                        {#</dl>#}
                    {#</li>#}
                    {#<li>#}
                        {#<dl>#}
                            {#<dt>Invoice</dt>#}
                            {#<dd>#}
                                {#<a href="#">See</a>#}
                                {#<a href="#">Download</a>#}
                            {#</dd>#}
                        {#</dl>#}
                    {#</li>#}
                    {#<li>#}
                        {#<dl>#}
                            {#<dt>Contract</dt>#}
                            {#<dd>#}
                                {#<a href="#">See</a>#}
                                {#<a href="#">Download</a>#}
                            {#</dd>#}
                        {#</dl>#}
                    {#</li>#}
                    {#<li>#}
                        {#<dl>#}
                            {#<dt>Booking</dt>#}
                            {#<dd>#}
                                {#<a href="#">See</a>#}
                                {#<a href="#">Download</a>#}
                            {#</dd>#}
                        {#</dl>#}
                    {#</li>#}
                {#</ul>#}
            {#</div>#}
        {#</article>#}
        {#<!--twocolumns start-->#}
        {#<div id="twocolumns">#}
            {#<div class="col-1">#}
                {#<ul class="comments-list">#}
                    {#{% for chatMessage in chat.message |reverse %}#}
                        {#{% if chatMessage.sender_user.role_name == "Client" %}#}
                            {#<li>#}
                                {#<a href="#" class="img-holder">#}
                                    {#<img src="/assets/images/noAvatar.png" alt="image description">#}
                                {#</a>#}
                                {#<div class="holder">#}
                                    {#<div class="box">#}
                                        {#{% if chatMessage.files is defined %}#}
                                            {#<p>#}
                                            {#{% for chatFile in chatMessage.files %}#}
                                                {#<a href="{{ chatFile.file_name }}"><img class="chatImage" src="{{ chatFile.file_name }}"></a>#}
                                            {#{% endfor %}#}
                                            {#</p>#}
                                        {#{% endif %}#}
                                        {#{% if chatMessage.message_text is defined %}#}
                                            {#<p>{{ chatMessage.message_text }}</p>#}
                                        {#{% endif %}#}
                                        {#<em class="date">{{ chatMessage.time_from_get }}</em>#}
                                    {#</div>#}
                                {#</div>#}
                            {#</li>#}
                        {#{% else %}#}
                            {#<li class="right active">#}
                                {#<a href="#" class="img-holder">#}
                                {#{% if  chatMessage.sender_user.avatar is defined %}#}
                                    {#<img src="{{ chatMessage.sender_user.avatar }}" alt="image description">#}
                                {#{% else %}#}
                                    {#<img src="/assets/images/noAvatar.png" alt="image description">#}
                                {#{% endif %}#}
                                {#</a>#}
                                {#<div class="holder">#}
                                    {#<div class="box">#}
                                        {#{% if chatMessage.files is defined %}#}
                                            {#<p>#}
                                                {#{% for chatFile in chatMessage.files %}#}
                                                    {#<a href="{{ chatFile.file_name }}"><img class="chatImage" src="{{ chatFile.file_name }}"></a>#}
                                                {#{% endfor %}#}
                                            {#</p>#}
                                        {#{% endif %}#}
                                        {#{% if chatMessage.message_text is defined %}#}
                                            {#<pre>{{ chatMessage.message_text }}</pre>#}
                                        {#{% endif %}#}
                                        {#<em class="date">{{ chatMessage.time_from_get }}</em>#}
                                    {#</div>#}
                                {#</div>#}
                            {#</li>#}
                        {#{% endif %}#}
                    {#{% endfor %}#}
                {#</ul>#}
            {#</div>#}
            {#<div class="col-2">#}
                {#<form class="message-form" action="#">#}
                    {#<textarea class="textarea" maxlength="512" id="chat-room" placeholder="Write your message"></textarea>#}
                    {#<div class="upload-box">#}
                        {#<div class="row">#}
                            {#<input type="file" name="files[]" id="filer_input1" class="chatFileUpload" multiple="multiple">#}
                        {#</div>#}
                        {#<div class="controls">#}
                            {#<div class="button-gradient filled">#}
                                {#<button class="btn" id="sendMsg" type="submit"><span class="glyphicon glyphicon-refresh glyphicon-refresh-animate chatMessageSending"></span> Send</button>#}
                            {#</div>#}
                        {#</div>#}
                    {#</div>#}
                    {#<h3>Technical req</h3>#}
                    {#<div class="frame">#}
                        {#<select data-class="selections-white custom" name="custom" id="custom">#}
                            {#<option value="0">Custom</option>#}
                            {#<option value="1">Custom 1</option>#}
                            {#<option value="2">Custom 2</option>#}
                        {#</select>#}
                    {#</div>#}
                    {#<textarea class="textarea tall" placeholder="Custom"></textarea>#}
                {#</form>#}
            {#</div>#}
        {#</div>#}


    {#</div>#}

{#</main>#}


<script type="text/javascript" src="{{ asset('bundles/goswebsocket/js/gos_web_socket_client.js') }}"></script>
<script type="text/javascript" src="{{ asset('bundles/goswebsocket/js/vendor/autobahn.min.js') }}"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.1.3/vue.js"></script>

{% include 'ActedLegalDocsBundle:Default:footer.html.twig' %}